<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>check_puppet - plugin to check Puppet daemon
availability</title>
</head>
<body>
<h1>check_puppet - plugin to check Puppet daemon availability</h1>

<hr />
<pre>
<!-- Manpage converted by man2html 3.0.1 -->

</pre>

<h2>SYNOPSIS</h2>

<pre>
       <b>check_puppet</b> [<i>-h</i> <i>|</i> <i>-v</i>] [<i>OPTIONS</i>]


</pre>

<h2>DESCRIPTION</h2>

<pre>
       check_puppet  observes  for  Puppet daemon activity by checking the pid
       file against the process running on the system for both  Puppet  master
       daemon  and  Puppet  client.   In  the  client mode local configuration
       freshness is also being checked.


</pre>

<h2>OPTIONS</h2>

<pre>
       <b>-h</b>     Print this help and then exit immediately.

       <b>-v</b>     Print version and exit.

       <b>-c</b>     Enable puppet client checking mode. (default)

       <b>-C</b>     Do not check puppetd.

       <b>-m</b>     Enable puppet master daemon checking mode.

       <b>-M</b>     Do not check puppet master daemon. (default)

       <b>-p</b> path-to-pid
              Running puppet client pid file. You should ensure that user run-
              ning  this  plugin  have  sufficient  permissions to access this
              file. Default is /var/run/puppet/puppetd.pid

       <b>-P</b> path-to-pid
              Puppet  master  daemon  pid  file.  Default  pid  file  path  is
              /var/run/puppet/puppetmasterd.pid

       <b>-s</b> path-to-yaml
              Puppet client local configuration YAML. By default puppet stores
              it's state in /var/puppet/state/state.yaml

       <b>-e</b>     Configuration expiration warning delay.

       <b>-E</b>     Configuration expiration critical delay.


</pre>

<h2>EXAMPLES</h2>

<pre>
       You can use SNMP plugin from <i>net-mgmt/nagios-plugins</i>  FreeBSD  port  to
       monitor Puppet daemon activity on remote host.

       First,  you  need to setup a working installation of SNMP-client on the
       host. For the details consult the offical Net-SNMP project site at

           http://net-snmp.sourceforge.net/

       Configure yet another probe in <b>snmpd.conf</b>(5)  to  execute  <b>check_puppet</b>
       agent with any available command line options:

              exec check_puppet /usr/local/bin/check_puppet

       restart <b>snmpd</b> daemon, then query SNMP-client:

              $ snmpwalk -v 1 -c public localhost .1.3.6.1.4.1.2021.8

       You  should  see  the  output  from  <b>snmpd</b> daemon showing the result of
       <b>check_puppet</b> agent execution both the output  status  string  and  exit
       code.

       Now  configure  Nagios  service check command. Be sure you have working
       <b>check_snmp</b> command definition in your Nagios configuration. You need to
       pass  <i>both</i>  OIDs  to  <b>check_snmp</b>  command  with <b>-o</b> option - one OID for
       string and another OID for exit status code in  order  to  get  correct
       status  information and status code retrieving by Nagios poller.  Spec-
       ify warning and critical ranges with <b>-w</b> and <b>-c</b> options as `,0' and `,1'
       values  accordingly.  Check  in  more options for <b>check_snmp</b> command by
       typing

              $ /usr/local/libexec/nagios/check_snmp -h

       Consult any questions about Nagion configuration at

           http://www.nagios.org/docs/


</pre>

<h2>ENVIRONMENT</h2>

<pre>
       Although it is possible to set almost all  options  with  command  line
       arguments  there  are  some  environment variables can be set to change
       some script parameters. Note that command line options have higher pri-
       ority before environment variables.

       <b>PUPPETD_PIDFILE</b> and <b>PUPPET_MASTERD_PIDFILE</b> environment variables speci-
       fies your Puppet installation pid files  for  client  and  master  pro-
       cesses.

       <b>PUPPETD_STATE</b> variable allow to alternate the path to local client YAML
       configuration from the default value.

       Timeouts in seconds to set whether WARNING or CRITICAL  states  can  be
       adjusted  with  <b>PUPPETD_STATE_WARNING</b>  and <b>PUPPETD_STATE_CRITICAL</b> vari-
       ables.  Note that the warning value must not exceed the  value  set  to
       critical point.

       Triggers  <b>CHECK_PUPPETD</b>,  <b>CHECK_PUPPET_MASTERD</b>  can  be set to `yes' or
       `no' to indicate puppet client or puppet master installation,  or  ever
       both.

       It  is  possible to determine the check status from the remote host not
       only by checking the exit code of probe execution. If you would like to
       parse the output string and decide the exit status on the Nagios server
       - set the <b>OUTPUT_PREFIXED</b> variable to get output string  prefixed  with
       the  following keywords: OK, WARNING, CRITICAL, UNKNOWN accoring to the
       status.


</pre>

<h2>AVAILABILITY</h2>

<pre>
       The latest version of this distribution is available on-line from:

           http://www.renatasystems.org/freebsd/check_puppet.html


</pre>

<h2>AUTHOR</h2>

<pre>
       Written by Alexey V. Degtyarev


</pre>

<h2>REPORTING BUGS</h2>

<pre>
       Report bugs to &lt;alexey@renatasystems.org&gt;


</pre>

<h2>SEE ALSO</h2>

<pre>
       <b>snmpd.conf</b>(5) <b>snmpd</b>(8)



FreeBSD                            May 2009                    CHECK_PUPPET(1)
</pre>

<hr />
<address>Man(1) output converted with <a
href="http://www.oac.uci.edu/indiv/ehood/man2html.html">man2html</a></address>
</body>
</html>

